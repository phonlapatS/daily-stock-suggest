# ðŸ“Š V3.4 Development Roadmap
## "The Adaptive Engine"

---

## ðŸŽ¯ Project Overview

**Project Name:** Fractal N+1 Prediction System  
**Current Version:** V3.4 - The Adaptive Engine  
**Branch:** `version-3.4`  
**Last Updated:** 2026-02-05

---

## ðŸ“ˆ Version History

| Version | Codename | Release Date | Key Features |
|---------|----------|--------------|--------------|
| V1.0 | Foundation | 2025-12 | Basic Pattern Matching |
| V2.0 | Enhanced | 2026-01 | Multi-timeframe Support |
| V3.0 | Statistical | 2026-01 | Statistical Filtering |
| V3.1 | Strict | 2026-01 | Streak Logic + Thresholds |
| V3.2 | Scored | 2026-01 | Confidence & Risk Scoring |
| V3.3 | Metrics | 2026-02 | Performance Logging + 4-Table Report |
| **V3.4** | **Adaptive** | **2026-02** | **Dynamic Pattern + Cache System** |

---

## ðŸ”§ V3.3 â†’ V3.4 Change Log

### ðŸ“… Day 1: V3.3 Completion (2026-02-04)

#### 4-Table Report System
| Change | File | Description |
|--------|------|-------------|
| Table 1: Thai Strict | `scripts/calculate_metrics.py` | Prob > 60%, RR > 2.0 |
| Table 2: Thai Balanced | `scripts/calculate_metrics.py` | Prob > 60%, 1.5 < RR â‰¤ 2.0 |
| Table 3: International Observation | `scripts/calculate_metrics.py` | Prob > 55%, RR > 1.1 |
| Table 4: International Sensitivity | `scripts/calculate_metrics.py` | Prob > 50%, 0.5 < RR â‰¤ 1.1 |

#### Report Enhancements
| Change | File | Description |
|--------|------|-------------|
| Symbol Mapping | `scripts/calculate_metrics.py` | 9988 â†’ ALIBABA, 600519 â†’ MOUTAI |
| Country Codes | `scripts/calculate_metrics.py` | TH, US, CN, HK, TW |
| Min Signal â‰¥ 30 | `scripts/calculate_metrics.py` | Filter low-count patterns |
| Integer Formatting | `scripts/calculate_metrics.py` | Signals column as int |

---

### ðŸ“… Day 2: V3.4 Development (2026-02-04 ~ 2026-02-05)

#### Phase 4.1: Dynamic Pattern Detection
| Change | File | Description |
|--------|------|-------------|
| Pattern Length 3-8 Days | `processor.py` | Scan multiple pattern lengths |
| Best Pattern Selection | `processor.py` | Choose longest effective pattern |
| Backtest Sync | `scripts/backtest.py` | Same logic in backtesting |
| IndentationError Fix | `processor.py` | Lines 237-305 |

#### Phase 4.2: Adaptive Data Splitting
| Change | File | Description |
|--------|------|-------------|
| Established (>1000 bars) | `scripts/backtest.py` | Fixed 250-bar test window |
| Growing (220-1000 bars) | `scripts/backtest.py` | 80/20 Train/Test split |
| Emerging (<220 bars) | `scripts/backtest.py` | Graceful handling |
| Min Data 1000 â†’ 250 | `scripts/backtest.py` | Support newer stocks |

#### Phase 4.3: Intraday Scanner
| Change | File | Description |
|--------|------|-------------|
| Intraday Runner | `scripts/intraday_runner.py` | **NEW** Gold/Silver 15m/30m |
| 24h Monitoring Loop | `scripts/intraday_runner.py` | Continuous scanning |
| Alert on High Prob >60% | `scripts/intraday_runner.py` | Notification system |

#### Phase 5: OHLC Cache System
| Change | File | Description |
|--------|------|-------------|
| Cache Module | `core/data_cache.py` | **NEW** Local OHLC storage |
| `has_cache()` | `core/data_cache.py` | Check cache existence |
| `load_cache()` | `core/data_cache.py` | Load from CSV |
| `save_cache()` | `core/data_cache.py` | Save to CSV |
| `update_cache()` | `core/data_cache.py` | Merge old + new data |
| `get_data_with_cache()` | `core/data_cache.py` | Smart fetch (Delta 50 bars) |
| `is_cache_stale()` | `core/data_cache.py` | Check if >12 hours old |
| Cache Integration | `main.py` | Use cache in fetch_and_analyze |
| Rate Limiting | `main.py` | 1s delay + Exponential Backoff |
| TradingView Login | `main.py` | Account authentication |

#### Phase 6: Project Cleanup & Validation (Completed)
| Change | File | Description |
|--------|------|-------------|
| 5,000-Bar Backtest | `scripts/backtest.py` | âœ… **Verified** (SUPER 70%, TPIPP 63%) |
| Threshold Tuning | `config.py` | âœ… **Finalized** (Targeted Strategies) |
| 4-Table Report | `scripts/calculate_metrics` | âœ… **Production Ready** |

---


#### Phase 7: Deep Sensitivity & Visualization (Completed)
| Change | File | Description |
|--------|------|-------------|
| Sensitivity Matrix | `scripts/test_sensitivity.py` | âœ… **Analysis** (Threshold 0.6-0.7 / Days 30) |
| Equity Curve | `scripts/visualize_equity.py` | âœ… **Proof** (TPIPP vs SIRI vs Market) |
| Final Report | `docs/THRESHOLD_SENSITIVITY_REPORT_V3.4.md` | âœ… **Documentation** (Strategy Finalized) |

---


## ðŸš€ Future Roadmap: V4.0 (Real-time Alert)

> **Detailed Plan:** See [V4.0_REALTIME_ALERT_PLAN.md](V4.0_REALTIME_ALERT_PLAN.md) for full architecture and implementation details.

| # | Task | Priority | Description |
|---|------|----------|-------------|
| 1 | **Line/Telegram Bot** | ðŸ”´ HIGH | Push signals to mobile in real-time |
| 2 | **Dashboard UI** | ðŸŸ¡ MEDIUM | Web Interface for Equity Curve monitoring |
| 3 | **Automated Execution** | ðŸ”µ LOW | Connect API for auto-trade (Experimental) |

---

## ðŸŽ“ Key Learnings (V3.4 Final)

1.  **Trust the Data:** 5000-bar backtests reveal the true nature of assets (Alpha vs Beta).
2.  **Market Efficiency Matters:** US Markets are tough (52% Win Rate is good), Thai Markets are exploitable (60%+ Win Rate).
3.  **Thresholds are Key:** One size does NOT fit all. Hybrid Strategy is the solution.
4.  **Visual Proof:** Equity Curves don't lie. High Frequency w/ Low Quality = Portfolio Killer.

---

## ðŸ“ž Contact

- **GitHub:** [phonlapatS/daily-stock-suggest](https://github.com/phonlapatS/daily-stock-suggest)
- **Branch:** version-3.4
