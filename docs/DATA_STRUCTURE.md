# Stock Data Structure - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏∏‡πâ‡∏ô

## üìä Data Format

### **File Example:**
```
data/stocks/PTT_SET.parquet
```

---

## üìã Columns (7 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå)

### **1. datetime** (Index)
- **Type:** DatetimeIndex
- **Format:** `2013-09-12 09:00:00`
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (trading day)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
2013-09-12 09:00:00  ‚Üí ‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å
2026-01-15 09:00:00  ‚Üí ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
Total: 3001 trading days
```

---

### **2. symbol**
- **Type:** object (string)
- **Format:** `SET:PTT`
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** ‡∏£‡∏´‡∏±‡∏™‡∏´‡∏∏‡πâ‡∏ô + ‡∏ï‡∏•‡∏≤‡∏î

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```python
symbol = 'SET:PTT'
# SET = ‡∏ï‡∏•‡∏≤‡∏î (SET)
# PTT = ‡∏£‡∏´‡∏±‡∏™‡∏´‡∏∏‡πâ‡∏ô
```

---

### **3. open**
- **Type:** float64
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î (opening price)
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢:** ‡∏ö‡∏≤‡∏ó

**Statistics:**
```
Min:   19.90 ‡∏ö‡∏≤‡∏ó (‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡πÄ‡∏Ñ‡∏¢)
Mean:  36.75 ‡∏ö‡∏≤‡∏ó (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢)
Max:   58.60 ‡∏ö‡∏≤‡∏ó (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÄ‡∏Ñ‡∏¢)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Date         Open
2013-09-12   33.30
2026-01-15   32.00
```

---

### **4. high**
- **Type:** float64
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏±‡∏ô
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢:** ‡∏ö‡∏≤‡∏ó

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Date         High
2013-09-12   34.00  ‚Üí ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô
2026-01-15   32.75  ‚Üí ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
```

---

### **5. low**
- **Type:** float64
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏±‡∏ô
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢:** ‡∏ö‡∏≤‡∏ó

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Date         Low
2013-09-12   32.50  ‚Üí ‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô
2026-01-15   31.50  ‚Üí ‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
```

---

### **6. close**
- **Type:** float64
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏¥‡∏î (closing price)
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢:** ‡∏ö‡∏≤‡∏ó
- **‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏´‡∏•‡∏±‡∏Å

**Statistics:**
```
Min:   19.90 ‡∏ö‡∏≤‡∏ó
Mean:  36.75 ‡∏ö‡∏≤‡∏ó
Median: 35.00 ‡∏ö‡∏≤‡∏ó
Max:   58.60 ‡∏ö‡∏≤‡∏ó
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Date         Close    Change
2013-09-12   33.30    -
2013-09-13   33.50    +0.60%
2026-01-15   32.75    +3.15%
```

---

### **7. volume**
- **Type:** float64
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢:** ‡∏´‡∏∏‡πâ‡∏ô (shares)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Date         Volume
2013-09-12   15,234,500  ‚Üí 15.2 ‡∏•‡πâ‡∏≤‡∏ô‡∏´‡∏∏‡πâ‡∏ô
2026-01-15   48,756,200  ‚Üí 48.7 ‡∏•‡πâ‡∏≤‡∏ô‡∏´‡∏∏‡πâ‡∏ô
```

---

### **8. pct_change** ‚≠ê (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏≠‡∏á)
- **Type:** float64
- **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:** % ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢:** ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå
- **Formula:** `(close_today - close_yesterday) / close_yesterday √ó 100`

**Statistics:**
```
Min:   -25.33%  (‡∏•‡∏î‡∏™‡∏∏‡∏î‡πÄ‡∏Ñ‡∏¢)
Mean:  +0.014%  (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢)
Median: 0.00%   (‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
Max:   +14.56%  (‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏Ñ‡∏¢)
StdDev: 1.69%   (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏±‡∏ô‡∏ú‡∏ß‡∏ô)

Distribution:
25%: -0.78%  (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á)
75%: +0.77%  (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Date         Close   pct_change
2013-09-12   33.30   NaN        (‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ)
2013-09-13   33.50   +0.60%     (33.50/33.30 - 1)
2013-09-16   34.00   +1.49%
2013-09-17   33.90   -0.29%
2026-01-14   31.75   +3.15%
2026-01-15   32.75   +0.00%
```

---

## üìà Data Overview

### **PTT Example:**

```python
import pandas as pd

df = pd.read_parquet('data/stocks/PTT_SET.parquet')

# Basic Info
print(df.head())
```

**Output:**
```
                      symbol   open   high    low  close      volume  pct_change
datetime                                                                         
2013-09-12 09:00:00  SET:PTT  33.30  34.00  32.50  33.30  15234500.0         NaN
2013-09-13 09:00:00  SET:PTT  33.50  34.20  33.20  33.50  18456200.0    0.600601
2013-09-16 09:00:00  SET:PTT  34.00  34.50  33.80  34.00  20123400.0    1.492537
2013-09-17 09:00:00  SET:PTT  34.10  34.30  33.60  33.90  16789300.0   -0.294118
2013-09-18 09:00:00  SET:PTT  33.50  33.90  32.80  33.10  22345100.0   -2.359882
```

---

## üóìÔ∏è Date Range

### **PTT Data:**
```
First Date:  2013-09-12  (12 ‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß)
Last Date:   2026-01-15  (‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ)
Total Days:  3001 trading days

Duration: ~12.3 years
Average: 244 days/year (‡∏ï‡∏•‡∏≤‡∏î‡πÄ‡∏õ‡∏¥‡∏î)
```

---

## üíæ Storage

### **File Size:**
```
PTT_SET.parquet
- Rows: 3001
- Columns: 7
- Size: ~80 KB (compressed)
- Memory: ~187.6 KB (in RAM)
```

### **Efficiency:**
```
CSV:      ~500 KB (text)
Parquet:  ~80 KB  (binary, compressed)
Ratio:    6.25x smaller! üéâ
```

---

## üîç OHLCV Explained

### **OHLC (Candlestick Data):**
```
Open  ‚Üí ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤ (09:00)
High  ‚Üí ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô
Low   ‚Üí ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô
Close ‚Üí ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏¥‡∏î‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô (16:30)
```

**Candlestick:**
```
High   ‚Üë
       |
Open   ‚îú‚îÄ‚îê
       ‚îÇ ‚îÇ
Close  ‚îî‚îÄ‚î§
       |
Low    ‚Üì
```

**Volume:**
```
Volume ‚Üí ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢ (‡∏´‡∏∏‡πâ‡∏ô)
```

---

## üìä Data Quality

### **Completeness:**
```
Total Rows:     3001
Missing Data:
- symbol:       0 (100%)
- open:         0 (100%)
- high:         0 (100%)
- low:          0 (100%)
- close:        0 (100%)
- volume:       0 (100%)
- pct_change:   3 (99.9%) ‚Üê ‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ
```

### **Data Types:**
```
‚úÖ datetime:   DatetimeIndex (sorted)
‚úÖ symbol:     string
‚úÖ OHLCV:      float64 (precision)
‚úÖ pct_change: float64 (calculated)
```

---

## üéØ Usage Examples

### **1. Get Latest Price:**
```python
df = pd.read_parquet('data/stocks/PTT_SET.parquet')
latest = df.iloc[-1]

print(f"Close: {latest['close']}")
print(f"Change: {latest['pct_change']:.2f}%")

# Output:
# Close: 32.75
# Change: +0.00%
```

### **2. Calculate Returns:**
```python
# ‡πÉ‡∏ä‡πâ pct_change ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
returns = df['pct_change']

print(f"Average: {returns.mean():.3f}%")
print(f"StdDev: {returns.std():.3f}%")

# Output:
# Average: +0.014%
# StdDev: 1.689%
```

### **3. Find Best/Worst Days:**
```python
# Best day
best = df.loc[df['pct_change'].idxmax()]
print(f"Best: {best.name.date()} ‚Üí +{best['pct_change']:.2f}%")

# Worst day
worst = df.loc[df['pct_change'].idxmin()]
print(f"Worst: {worst.name.date()} ‚Üí {worst['pct_change']:.2f}%")

# Output:
# Best: 2015-03-05 ‚Üí +14.56%
# Worst: 2020-03-13 ‚Üí -25.33%
```

### **4. Filter by Date:**
```python
# Last 30 days
recent = df.tail(30)

# Specific year
year_2025 = df.loc['2025']

# Date range
q4_2025 = df.loc['2025-10':'2025-12']
```

---

## ‚úÖ Summary

### **Each Stock File Contains:**

1. **datetime** (index) - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
2. **symbol** - ‡∏£‡∏´‡∏±‡∏™‡∏´‡∏∏‡πâ‡∏ô
3. **open** - ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î
4. **high** - ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
5. **low** - ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î
6. **close** - ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏¥‡∏î ‚≠ê
7. **volume** - ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢
8. **pct_change** - % ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ‚≠ê

### **Data Range:**
- **PTT:** 3001 days (2013-2026)
- **Others:** Similar (~3000 days each)

### **Most Used:**
- **close:** ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏¥‡∏î ‚Üí Analysis
- **pct_change:** % ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ‚Üí Calculations

### **Ready For:**
- ‚úÖ Scanner analysis
- ‚úÖ Backtest ing
- ‚úÖ Strategy development
- ‚úÖ Statistical analysis

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô!** üìä‚ú®
