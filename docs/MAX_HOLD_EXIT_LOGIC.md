# üîç Max Hold Exit Logic

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 2026-02-13  
**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ logic ‡∏Å‡∏≤‡∏£ exit ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Max Hold 5 ‡∏ß‡∏±‡∏ô

---

## üìä Logic ‡∏Å‡∏≤‡∏£ Exit

### **‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á Max Hold 5 ‡∏ß‡∏±‡∏ô:**

```python
# Last day: exit at close
if day == start_day + max_hold_days - 1:
    ret_pct = close_pct  # Return ‡∏ó‡∏µ‡πà close ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
    ret_pct -= (exit_slip + total_commission)  # Deduct friction
    return {
        'return_pct': ret_pct,
        'exit_reason': 'MAX_HOLD',
        'hold_days': 5,
        'sl_used': actual_sl_pct
    }
```

**‡∏™‡∏£‡∏∏‡∏õ:**
- Exit ‡∏ó‡∏µ‡πà **close price** ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 5)
- `exit_reason = 'MAX_HOLD'`
- `ret_pct` = return ‡∏ó‡∏µ‡πà close ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢

---

## üéØ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ

### **1. ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∑‡∏≠ 5 ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏ß‡∏Å‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á TP:**

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
- TP = 3.5% (ATR-based)
- ‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏±‡∏ô: return = +2.0% (‡∏ö‡∏ß‡∏Å‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á TP)

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- ‚úÖ **‡∏ô‡∏±‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô WIN** (return > 0)
- `exit_reason = 'MAX_HOLD'`
- `return_pct = +2.0%` (‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏ï‡πà‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢)

**‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:** ‚úÖ ‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏ï‡πà‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢

---

### **2. ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∑‡∏≠ 5 ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏¥‡∏î‡∏•‡∏ö:**

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
- SL = 1.0% (ATR-based)
- ‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏±‡∏ô: return = -0.5% (‡∏ï‡∏¥‡∏î‡∏•‡∏ö‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á SL)

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- ‚ùå **‡∏ô‡∏±‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô LOSS** (return < 0)
- `exit_reason = 'MAX_HOLD'`
- `return_pct = -0.5%` (‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô)

---

### **3. ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∑‡∏≠ 5 ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß break-even:**

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
- ‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏±‡∏ô: return = 0.0% (‡πÑ‡∏°‡πà‡∏ö‡∏ß‡∏Å‡πÑ‡∏°‡πà‡∏•‡∏ö)

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- ‚ùå **‡∏ô‡∏±‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô LOSS** (return <= 0)
- `exit_reason = 'MAX_HOLD'`
- `return_pct = 0.0%` (break-even)

---

## üìä Exit Reasons ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

| Exit Reason | ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå |
|-------------|---------|---------|
| **TAKE_PROFIT** | ‡∏ñ‡∏∂‡∏á TP ‡∏Å‡πà‡∏≠‡∏ô 5 ‡∏ß‡∏±‡∏ô | ‚úÖ WIN (return = TP%) |
| **STOP_LOSS** | ‡∏ñ‡∏∂‡∏á SL ‡∏Å‡πà‡∏≠‡∏ô 5 ‡∏ß‡∏±‡∏ô | ‚ùå LOSS (return = -SL%) |
| **TRAILING_STOP** | Trailing stop trigger | ‚úÖ WIN (return = trailing level) |
| **MAX_HOLD** | ‡∏Ñ‡∏£‡∏ö 5 ‡∏ß‡∏±‡∏ô | ‚úÖ WIN ‡∏ñ‡πâ‡∏≤ return > 0, ‚ùå LOSS ‡∏ñ‡πâ‡∏≤ return <= 0 |
| **END_DATA** | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏û‡∏≠ | ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö return |

---

## üîç ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á

### **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 1: MAX_HOLD + WIN**
```
Entry: 100 ‡∏ö‡∏≤‡∏ó
TP: 3.5%
SL: 1.0%
Max Hold: 5 ‡∏ß‡∏±‡∏ô

Day 1: 101.0 ‡∏ö‡∏≤‡∏ó (+1.0%)
Day 2: 101.5 ‡∏ö‡∏≤‡∏ó (+1.5%)
Day 3: 101.8 ‡∏ö‡∏≤‡∏ó (+1.8%)
Day 4: 102.0 ‡∏ö‡∏≤‡∏ó (+2.0%)
Day 5: 102.0 ‡∏ö‡∏≤‡∏ó (+2.0%) ‚Üê Exit ‡∏ó‡∏µ‡πà close

Result:
- exit_reason: 'MAX_HOLD'
- return_pct: +2.0%
- correct: 1 (WIN)
- ‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏ï‡πà‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢ (‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á TP 3.5%)
```

### **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 2: MAX_HOLD + LOSS**
```
Entry: 100 ‡∏ö‡∏≤‡∏ó
TP: 3.5%
SL: 1.0%
Max Hold: 5 ‡∏ß‡∏±‡∏ô

Day 1: 99.5 ‡∏ö‡∏≤‡∏ó (-0.5%)
Day 2: 99.8 ‡∏ö‡∏≤‡∏ó (-0.2%)
Day 3: 99.9 ‡∏ö‡∏≤‡∏ó (-0.1%)
Day 4: 99.7 ‡∏ö‡∏≤‡∏ó (-0.3%)
Day 5: 99.5 ‡∏ö‡∏≤‡∏ó (-0.5%) ‚Üê Exit ‡∏ó‡∏µ‡πà close

Result:
- exit_reason: 'MAX_HOLD'
- return_pct: -0.5%
- correct: 0 (LOSS)
- ‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô (‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á SL 1.0%)
```

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

### **‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∑‡∏≠ 5 ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏ß‡∏Å‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á TP:**
- ‚úÖ **‡∏ô‡∏±‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô WIN** (return > 0)
- ‚úÖ **‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏ï‡πà‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢** (‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á TP)
- `exit_reason = 'MAX_HOLD'`

### **‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∑‡∏≠ 5 ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏¥‡∏î‡∏•‡∏ö:**
- ‚ùå **‡∏ô‡∏±‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô LOSS** (return <= 0)
- ‚ùå **‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô** (‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á SL)

### **‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∑‡∏≠ 5 ‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß break-even:**
- ‚ùå **‡∏ô‡∏±‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô LOSS** (return <= 0)

---

## üîó Related Documents

- [REVERT_TO_STABLE_SETTINGS.md](REVERT_TO_STABLE_SETTINGS.md) - ‡∏Å‡∏≤‡∏£ revert settings
- [STRATEGY_TABLE_BY_COUNTRY.md](STRATEGY_TABLE_BY_COUNTRY.md) - ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå

