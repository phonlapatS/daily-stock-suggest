# Predict N+1 System (V3.2) - User Guide

## ðŸš€ Quick Start
Step-by-step guide to running the system daily.

### 1. Run Daily Forecast
Every morning (or after market close), run the main script to generate forecasts for the next day.

```bash
python main.py
```
**What happens:**
- Connects to TradingView data feed.
- Downloads latest data for 200+ assets (Thai, US, Metals, China).
- Calculates patterns vs history.
- **Output 1**: Displays "PREDICT N+1 REPORT" in terminal.
- **Output 2**: Saves detailed CSV to `data/pattern_results.csv`.
- **Output 3**: Logs forecasts to `logs/performance_log.csv` for verification.

### 2. Verify Performance
The `main.py` script automatically verifies **yesterday's forecasts** at the end of the process. You will see a summary:
```
ðŸ“Š VERIFIED YESTERDAY'S FORECASTS:
   Correct: 15
   Incorrect: 5
   Accuracy: 75.0%
```

---

## ðŸ“Š Reading the Report

The report columns explained:

| Column | Meaning |
| :--- | :--- |
| **Symbol** | Asset ticker (e.g., PTT, NVDA) |
| **Price** | Latest closing price |
| **Chg%** | % Change of the last day |
| **Pattern** | 3-4 day sequence (e.g., `++-` means Up, Up, Down) |
| **Chance** | Forecast Direction (ðŸŸ¢ UP / ðŸ”´ DOWN) |
| **Prob** | Historical probability (e.g., 65%) |
| **Conf%** | Confidence score (combines Prob + Sample Size) |
| **Risk%** | Historical downside risk (avg loss) |
| **Stats** | `Wins/Total (Total Bars)` |
| **Exp.Move** | Expected % move based on history |

**Key Rule:**
- **High Confidence**: Look for `Prob > 60%` AND `Conf > 40%`.
- **Sample Size**: Results with `< 30 matches` are hidden by default to prevent false signals.

---

## ðŸ›  Advanced Usage

### Backtesting (Historical Test)
To verify how well the system would have performed in the past:

**Test Specific 4 Stocks (Quick Check):**
```bash
python scripts/backtest.py --quick
```

**Test a Single Stock:**
```bash
python scripts/backtest.py PTT SET
```

**Test All System Stocks (Takes ~10-15 mins):**
```bash
python scripts/backtest.py --all
```

---

## ðŸ“‚ Configuration
You can edit `config.py` to change:
- **Assets**: Add/Remove symbols in `ASSET_GROUPS`.
- **History**: Change `history_bars` (default 5000).
- **Threshold**: Adjust volatility sensitivity.

---

## âš ï¸ Important Notes
1. **Network**: If you see `Connection Timed Out`, check your internet or wait a few minutes and retry.
2. **Fact Check**: Always verify the "Price" column matches your trading app to ensure data is current.
3. **Execution**: The forecast is for **Day N+1**. If you run this on Friday evening, the forecast is for Monday.
