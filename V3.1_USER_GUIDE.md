
# PredictPlus V3.1 User Guide

This guide explains the key updates, logic, and intended usage of the PredictPlus V3.1 system.

## 1. System Overview
PredictPlus is a statistical pattern analysis tool for financial markets. It analyzes historical price data to identify recurring patterns and "streaks" of price movement, providing probability-based forecasts for the next trading day.

**Version 3.1** introduces:
- **Strict Logic**: Precise streak calculation without noise filtering.
- **New Metrics**: `Avg_Return` (Pattern Stats) and `Avg_Intensity` (Streak Profile).
- **Unified Reporting**: A single tool to view all insights.
- **Expanded Coverage**: Support for 255+ assets across TH, US, CN, HK, TW markets.

## 2. Core Logic Explanation

### A. The "Strict Logic" Approach
In V3.1, we reverted to **Strict Logic** for defining streaks (consecutive days of movement).
- **Rule**: A streak is broken **immediately** if a day does not meet the required threshold (based on volatility).
- **Why?**: This ensures 100% mathematical accuracy. We do *not* filter out "noise" (small moves). If the price barely moves (flat) or moves steadily against the trend, the streak ends.
- **Consistency**: This logic is applied uniformly to:
  - **Master Pattern Stats**: `MaxUp` / `MaxDown` headers.
  - **Streak Profile**: All survival probabilities.

### B. New Metrics

#### 1. Avg_Return (in Master Pattern Stats)
- **What is it?**: The average percentage change of the *next day* following a specific pattern.
- **How to read**:
  - `+0.5%`: On average, the price goes up 0.5% after this pattern.
  - `-1.2%`: On average, the price drops 1.2%.
- **Use Case**: Helps you gauge the *magnitude* of the expected move, not just the probability. A pattern with 60% probability but +2.0% Avg Return might be more attractive than 70% probability with +0.1% Avg Return.

#### 2. Avg_Intensity (in Streak Profile)
- **What is it?**: The average daily percentage change *during* the streak.
- **How to read**:
  - `+3.0%`: This streak is very strong/aggressive.
  - `+0.5%`: This is a "creeping" trend, slow and steady.
- **Use Case**: evaluating "Momentum Health". High-intensity streaks may be prone to sharp reversals (exhaustion), while low-intensity streaks might run longer.

## 3. How to Run the System

### Step 1: Batch Processing (Generate Data)
Run this script to fetch real data and calculate stats for all configured assets.
```bash
python batch_processor.py
```
*Note: This may take time as it processes 255+ assets. It saves incrementally every 5 assets.*

### Step 2: View Reports
Use the unified viewer to see both Pattern Stats and Streak Profile.

**For a single stock:**
```bash
python view_report.py ADVANC
```
*(Case insensitive. You can use symbol name or configured display name)*

**For ALL stocks (sequential view):**
```bash
python view_report.py --all
```

## 4. Interpreting the Report

### Part 1: Master Pattern Stats (Tomorrow's Forecast)
Focuses on **Pattern Recognition**.
- **Pattern**: The sequence of recent days (e.g., `++-` means Up, Up, Down).
- **Category**: Classification of the pattern (Trend, Reversal, Mixed, Breakout).
- **Chance**: The predicted direction (ðŸŸ¢ UP or ðŸ”´ DOWN) - always shows the more likely outcome.
- **Prob**: Probability of the predicted direction. **Always â‰¥50%** because it compares UP vs DOWN days only (FLAT days excluded).
- **Stats**: `winning_count/decisive_total (history_bars)` - shows count of winning direction vs total UP+DOWN occurrences.
- **Avg_Ret**: Expected return magnitude for the next day.

**Important**: Prob is calculated as `dominant_count / (up_count + down_count)`, excluding days where the price moved less than the threshold (FLAT). This ensures Chance, Prob, and Stats are always aligned and consistent.

### Part 2: Streak Profile (Momentum Health)
Focuses on **Trend Duration**.
- **Type**: Direction of the streak (UP or DOWN).
- **Day**: Current length of the streak (e.g., 3 days UP).
- **Count**: How many times this streak length was reached.
- **Cont.**: How many times it continued to the next day.
- **Prob**: Probability of the streak outcome.
  - `ðŸŸ¢ CONT.`: Likely to continue (â‰¥50%).
  - `ðŸ”´ REV.`: Likely to reverse/end (<50%).
- **Avg_Ints**: Average daily intensity (% change) during streaks of this length.


## 5. Configuration
Edit `config.py` to:
- Add/Remove stocks in `ASSET_GROUPS`.
- Change default settings (history length, volatility window).

